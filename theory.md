<!-- Загрузка данных в pandas -->

read_csv() — функция из библиотеки Pandas в Python, которая позволяет читать данные из CSV-файлов в объекты DataFrame.  13

Некоторые параметры функции:

filepath_or_buffer — расположение CSV-файла, может быть любым строковым путём или URL. 1
sep — разделитель, по умолчанию — запятая.

header — принимает целое число, список целых чисел, номера строк, которые будут использоваться в качестве имён столбцов и начала данных. Если не передавать имена, то первый столбец будет отображаться как 0, второй — как 1 и так далее

usecols — извлекает только выбранные столбцы из CSV-файла

nrows — количество строк, которые будут отображаться из набора данных

index_col — если None, то вместе с записями не будут отображаться номера индексов

skiprows — пропускает переданные строки в новом кадре данных

Пример использования: import pandas as pd; df = pd.read_csv('example.csv'); print(df). В этом примере данные из файла example.csv загружаются в DataFrame df и выводится его содержимое. 



<!-- фильтрация данных в pandas -->

Логическое индексирование. Подходит для простых условий фильтрации строк на основе условий, применяемых к отдельным столбцам. Например, чтобы отфильтровать строки, возраст которых превышает 30, нужно написать filtered_df = df[df['Возраст'] > 30]. 2

Метод .loc []. Используется для одновременной фильтрации строк и столбцов путём задания условий для обеих осей. Например, чтобы отфильтровать строки, в которых возраст больше 30, и выбрать только столбцы «Имя» и «Оценка», нужно написать filtered_df = df.loc[df['Возраст'] > 30, ['Имя', 'Оценка']]. 2

Функция .isin(). Используется при проверке, находится ли значение столбца в списке определённых значений. Например, чтобы отфильтровать строки, возраст которых равен 25 или 45, нужно написать filtered_df = df[df['Возраст'].isin([25, 45])]. 2

Функция .query(). 32 Подходит для сложных условий, написанных в SQL-подобном синтаксисе. 2

Логические операторы (AND, OR, NOT). Используются при объединении нескольких условий для фильтрации данных. 2

Выбор метода зависит от конкретной задачи и предпочтений пользователя.



<!-- Сортировка данных в pandas -->

<!-- Метод sort_values() в Pandas позволяет сортировать датафрейм по одному или нескольким столбцам в восходящем или descending порядке -->

Синтаксис: DataFrame.sort_values(by, axis=0, ascending=True, inplace=False, kind='quicksort', na_position='last'). 12

Параметры:

by: имя столбца или списка столбцов для сортировки (одно или список). 1
axis: 0 или «индекс» для сортировки строк, 1 или «столбцы» для сортировки столбцов. 1
ascending: логическое значение: True для восходящего порядка, False для descending. 1
inplace: логическое значение, если True, модифицирует исходный датафрейм. 1
kind: алгоритм сортировки: «quicksort», «mergesort» или «heapsort». 1
na_position: «first» или «last», определяет положение значений NaN. По умолчанию — «last». 1


Пример сортировки по одному столбцу:

import pandas as pd

data = {'Name': ['Alice', 'Bob', 'Charlie'], 'Age': [25, 30, 20]}
df = pd.DataFrame(data)

Сортировка по 'Возрасту'
sorted_df = df.sort_values(by='Age')
print(sorted_df)

Пример сортировки по нескольким столбцам:
data = {'Name': ['Alice', 'Bob', 'Charlie'], 'Age': [25, 30, 25], 'Score': [90, 80, 85]}
df = pd.DataFrame(data)

Сортировка по 'Возрасту', а затем по 'Очку'
sorted_df = df.sort_values(by=['Age', 'Score'], ascending=[True, False])
print(sorted_df)
Для сортировки по убыванию нужно установить параметр ascending в False. 34

<!-- nlargest() — функция библиотеки Pandas, которая возвращает указанное количество строк, начиная с верхней, после сортировки DataFrame по наибольшему значению для заданного столбца. -->

Синтаксис: dataframe.nlargest(n, columns, keep).  3

Параметры:

n — обязательный параметр, число, указывающее количество строк для возврата. 3
columns — опциональный параметр, строка (метка столбца) или список меток столбцов, указывающих столбцы для сортировки. 3
keep — опциональный параметр, по умолчанию «last», указывающий, что делать с дублирующими строками. Возможные значения: «all», «first», «last».  35
Возвращаемое значение — DataFrame с булевыми значениями. Метод не изменяет исходный DataFrame.  3

Некоторые области применения функции nlargest(): поиск лучших продуктов, кампаний, отделов и т. д., выявление наиболее прибыльных клиентов и другие



<!-- Агрегация -->


<!-- agg() -->

agg() — функция библиотеки Pandas для выполнения операций агрегации над DataFrame или Series. С её помощью можно применять различные функции, такие как sum, mean, count и многие другие.  2

Некоторые параметры функции:

func — функция или список функций, которые будут использоваться для агрегации данных. Некоторые из агрегатных функций: count() (количество элементов в группе), sum() (сумма значений в группе), average() (среднее значение в группе), min() (минимальное значение в группе). 2413
axis — ось, по которой будет применяться функция. Значение 0 используется для столбцов, 1 — для строк. 25
args и kwargs — дополнительные аргументы, которые передаются функции. 2

В зависимости от использования функции она может возвращать скаляр, серию или DataFrame:

Скаляр — при использовании функции Series.agg с одной функцией. 3
Серия — при использовании функции Dataframe.agg с одной функцией. 3
DataFrame — при использовании нескольких функций. 35

Функция agg() — важный инструмент для анализа данных в Python. 

Пример использования функции agg() в Pandas — вычисление суммы каждого столбца в DataFrame.  1

import pandas as pd [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)

# Создание образца DataFrame [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
data = {'A': [1, 2, 3], 'B': [4, 5, 6]} [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
df = pd.DataFrame(data) [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)

# Применение агрегации [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
result = df.agg('sum') [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
print(result) [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
Результат: A 6, B 15.  1

Ещё один пример — вычисление среднего значения и суммы каждого столбца.  1

# Применение нескольких функций [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
result = df.agg(['mean', 'sum']) [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
print(result) [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
Результат: A 2,0, B 5,0; sum 6,0, 15,0.  1

Третий пример — агрегация по строкам, для этого параметр axis устанавливается в 1.  1

# Применение агрегации по строкам [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
result = df.agg('sum', axis=1) [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
print(result) [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
Результат: 0 5, 1 7, 2 9.  1

Кроме встроенных функций агрегации, таких как sum и mean, в agg() можно передавать пользовательские функции. Например, вычисление диапазона (разницы между max и min) для каждого столбца.  1

# Определение пользовательской функции [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
def custom_func(x): return x.max() - x.min() [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)

# Применение пользовательской функции [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
result = df.agg(custom_func) [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
print(result) [1](https://pytutorial.com/python-pandas-agg-aggregate-data-in-dataframes/)
Результат: A 2, B 2. 1


<!-- Скаляр -->

Скаляр в библиотеке Pandas на Python — это одно значение, например целое число или строка. В отличие от скаляров, коллекции значений (списки или массивы) в Pandas называются последовательностями.  241

Обычно скаляры используют для заполнения пропущенных значений или целых столбцов в DataFrame.  2

Чтобы создать столбец из скаляра в Pandas, используют конструктор pandas.Series. Если передать в качестве параметра скаляр, то создаётся столбец из одного элемента. При этом строка тоже считается скаляром, несмотря на то, что формально является последовательностью


<!-- Серия -->

Серия (Series) в библиотеке Pandas на Python — это одномерный помеченный массив, который может хранить данные любого типа (целые числа, строки, числа с плавающей запятой, объекты Python и т. д.).  12

Некоторые особенности серии Pandas:

Поддерживает индексацию на основе целых чисел и меток. 1
Хранит разнородные типы данных. 1
Предлагает множество встроенных методов для манипулирования данными и их анализа. 1
Динамична: позволяет добавлять или удалять элементы по необходимости. 3
Серия похожа на столбец в электронной таблице, каждое значение в ряду связано с индексом, что упрощает поиск данных и манипулирование ими.  1

Серия может быть создана из различных структур данных, таких как списки, массивы NumPy, словари или скалярные значения. 13


<!-- DataFrame -->

DataFrame в Pandas — это двумерная табличная структура данных. 1 Её можно представить как таблицу, состоящую из строк и столбцов, где каждая колонка может содержать данные разного типа (числа, строки и т.д.). 2

Для создания DataFrame можно использовать различные источники данных, такие как списки, словари, массивы NumPy или даже CSV-файлы. Например, из словаря DataFrame создают так: ключи словаря становятся именами столбцов, а значения — данными этих столбцов. Из списка списков — так: ключи списка становятся именами столбцов, а значения — данными этих столбцов. 2

DataFrame располагает удобными методами для индексации, фильтрации, сортировки, группировки, агрегирования, слияния, объединения и преобразования данных. 


<!-- Groupby() -->

Groupby() — функция библиотеки Pandas, которая разделяет данные на группы по определённым критериям.  1

Процесс работы состоит из трёх шагов:

Разделение. Данные делятся на группы по заданным критериям. 1
Применение функции. К каждой группе независимо применяется функция. 1
Объединение результатов. Результаты применения функции объединяются в новый DataFrame. 1
Некоторые агрегатные функции, которые можно применять с помощью Groupby():

mean — вычисляет арифметическое среднее указанного столбца. 1
count — возвращает количество ненулевых значений в каждом ключе группы. 1
max — находит максимальное значение столбца внутри каждой группы. 1
min — определяет минимальное значение столбца внутри каждой группы. 1
sum — рассчитывает сумму значений в выбранном столбце для каждой группы. 1
median — получает медианное значение указанного столбца. 1
Эти функции можно использовать по отдельности или в комбинации друг с другом.

Несколько примеров использования метода groupby в Pandas:

Группировка по нескольким столбцам. Пример, как группировать данные по нескольким столбцам, например, по категории и подкатегории: 1
data = {
    'Category': ['A', 'A', 'B', 'B', 'A', 'B'],
    'Subcategory': ['X', 'Y', 'X', 'Y', 'X', 'Y'],
    'Value': [10, 20, 30, 40, 50, 60]
}
df = pd.DataFrame(data)
grouped = df.groupby(['Category', 'Subcategory'])
Анализ посещаемости студентов. Допустим, есть данные о посещаемости студентов, и нужно узнать количество посещений и среднюю оценку для каждого студента. 1
attendance_data = {
    'Student': ['Alice', 'Bob', 'Alice', 'Bob', 'Alice', 'Bob'],
    'Attendance': [1, 1, 1, 1, 1, 1],
    'Grade': [90, 85, 95, 80, 85, 90]
}
df = pd.DataFrame(attendance_data)
grouped = df.groupby('Student')
aggregated = grouped.agg({ 'Attendance': 'sum', 'Grade': 'mean' })
Анализ финансовых данных. Допустим, есть данные о финансовых транзакциях, и нужно узнать общую сумму транзакций и среднюю сумму транзакции для каждого типа транзакции. 1
financial_data = {
    'Transaction_Type': ['Credit', 'Debit', 'Credit', 'Debit', 'Credit', 'Debit'],
    'Amount': [1000, 2000, 1500, 2500, 2000, 3000]
}
df = pd.DataFrame(financial_data)
grouped = df.groupby('Transaction_Type')
aggregated = grouped.agg({ 'Amount': 'sum', 'Amount': 'mean' })
Фильтрация данных. Например, можно отфильтровать DataFrame, чтобы удалить строки, где средняя цена продажи группы меньше 20 000. 2
df = df.groupby('region').filter(lambda x: x['sales'].mean() < 20000)
print(df.head())